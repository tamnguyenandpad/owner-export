(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[438],{5307:function(i,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/shares/[shareId]/constructions/[constructionId]/owners/[ownerId]",function(){return n(4600)}])},5467:function(i,e,n){"use strict";var o=n(2322),r=n(2784),d=function(i){var e=i.message;return(0,o.jsx)("div",{className:"flex justify-center grow items-center text-grey-500",children:e||"\u4f55\u304b\u304c\u3046\u307e\u304f\u3044\u304b\u306a\u304b\u3063\u305f"})};e.Z=(0,r.memo)(d)},738:function(i,e,n){"use strict";var o=n(2322),r=n(2784),d=n(733),l=function(){return(0,o.jsx)("div",{className:"flex justify-center grow items-center","data-testid":"common-loading",children:(0,o.jsx)(d.Z,{fill:"#D72E3A"})})};e.Z=(0,r.memo)(l)},4600:function(i,e,n){"use strict";n.r(e);var o=n(6383),r=n(2322),d=n(5632),l=n(2784),t=n(8932),s=n(1060),a=n(738),u=n(9472),v=n(4067),c=n(7632),h=n(9390),m=n(7693),f=n(1187),x=n(9328),w=n(5467),p=n(9936),j=n(3906),b=n(1938),g=n(1093),N=function(){var i=(0,d.useRouter)(),e=i.query.ownerId,n=(0,m.I)(),N=(0,h.X)(),Z=(0,f.T)(),I=(0,b.SO)(),y=I.openModal,_=I.closeModal,E=(0,o.Z)((0,p.p7)(),1)[0],k=(0,o.Z)((0,p.$t)(),1)[0];(0,l.useEffect)((function(){!N([j.P.ownerGet,j.P.ownerList])&&Z.length&&((null===n||void 0===n?void 0:n.share.id)&&i.push(g.Z.reports(null===n||void 0===n?void 0:n.share.id,null===n||void 0===n?void 0:n.id)),t.Am.error("\u30a2\u30af\u30bb\u30b9\u3059\u308b\u6a29\u9650\u304c\u3042\u308a\u307e\u305b\u3093\u3002"))}),[N,null===n||void 0===n?void 0:n.id,null===n||void 0===n?void 0:n.share.id,Z,i]);var C=(0,p.TS)({variables:{shareID:(null===n||void 0===n?void 0:n.share.id)||"",queryOwnerID:e},skip:!n,onError:function(i){(0,x.d)(i)}}),D=C.loading,P=C.error,O=C.data,S=(0,p.gt)({variables:{shareID:(null===n||void 0===n?void 0:n.share.id)||""},skip:!(null===n||void 0===n?void 0:n.share.id)||!N([j.P.roleList]),onError:function(i){(0,x.d)(i)}}),A=S.data,T=(0,l.useCallback)((function(){E({variables:{shareID:(null===n||void 0===n?void 0:n.share.id)||"",ownerID:e},update:function(i){i.evict({id:"ShareOwner:".concat(e)}),i.gc()},onCompleted:function(){(null===n||void 0===n?void 0:n.share.id)&&i.push(g.Z.owners(null===n||void 0===n?void 0:n.share.id,null===n||void 0===n?void 0:n.id)),t.Am.success("\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u524a\u9664\u3057\u307e\u3057\u305f"),_()},onError:function(i){(0,x.d)(i)}})}),[_,null===n||void 0===n?void 0:n.id,null===n||void 0===n?void 0:n.share.id,E,e,i]),L=(0,l.useCallback)((function(i,e){var o;k({variables:{shareID:(null===n||void 0===n?void 0:n.share.id)||"",roleID:(null===(o=e.find((function(e){return e.name===i.roleName})))||void 0===o?void 0:o.id)||"",email:i.email},onCompleted:function(){t.Am.success("\u65bd\u4e3b\u3092\u62db\u5f85\u3057\u307e\u3057\u305f")},onError:function(i){(0,x.d)(i)}})}),[null===n||void 0===n?void 0:n.share.id,k]);if(D)return(0,r.jsx)(a.Z,{});if(P)return(0,r.jsx)(w.Z,{});var M=null===O||void 0===O?void 0:O.owner;return(0,r.jsxs)("div",{className:"px-4 md:px-11 py-6 grow overflow-auto",children:[(null===n||void 0===n?void 0:n.share.id)&&(0,r.jsx)(s.Z,{items:[{url:g.Z.setting(null===n||void 0===n?void 0:n.share.id,null===n||void 0===n?void 0:n.id),value:"\u8a2d\u5b9a"},{url:g.Z.owners(null===n||void 0===n?void 0:n.share.id,null===n||void 0===n?void 0:n.id),value:"\u65bd\u4e3b\u4e00\u89a7"}]}),(0,r.jsx)("div",{className:"mt-2 font-bold text-xl",children:"\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u60c5\u5831"}),(0,r.jsx)(u.Z,{src:(null===M||void 0===M?void 0:M.url)||"",readonly:!0}),(0,r.jsxs)("div",{className:"mt-6 bg-white p-6 md:w-[640px]",children:[(0,r.jsx)(v.Z,{name:(null===M||void 0===M?void 0:M.name)||"",readonly:!0}),(0,r.jsx)("div",{className:"text-sm text-grey-500 mt-6",children:"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9"}),(0,r.jsx)("div",{className:"mt-3",children:null===M||void 0===M?void 0:M.email}),(0,r.jsx)(c.Z,{role:(null===M||void 0===M?void 0:M.roleName)||"",ownerId:e,invitationStatus:null===M||void 0===M?void 0:M.invitationStatus}),(0,r.jsx)("div",{children:N([j.P.ownerCreate,j.P.roleList])&&M&&1!==M.invitationStatus&&A&&(0,r.jsx)("button",{onClick:function(){return L(M,A.listRoles)},className:"py-1 px-2 mt-6 bg-white rounded border border-grey-300",children:"\u62db\u5f85\u30e1\u30fc\u30eb\u3092\u518d\u9001\u3059\u308b"})}),N([j.P.ownerDelete])&&(0,r.jsx)("button",{onClick:function(){return y("CONFIRM",{title:"\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u524a\u9664",children:(0,r.jsx)("div",{children:"\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u524a\u9664\u3057\u307e\u3059\u304b?"}),onAccept:function(){return T()},acceptBtn:"\u306f\u3044",cancelBtn:"\u3044\u3044\u3048"})},className:"py-1 px-2 mt-6 bg-white rounded border text-red-500 border-grey-300",children:"\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u524a\u9664\u3059\u308b"})]})]})};e.default=(0,l.memo)(N)}},function(i){i.O(0,[963,652,852,718,774,888,179],(function(){return e=5307,i(i.s=e);var e}));var e=i.O();_N_E=e}]);